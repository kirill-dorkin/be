# Changelog - –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–∞–ø—á–∏

## v2.0.0 - –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –∫–∞–ø—á–∏

### ‚ú® –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞–ø—á–∏
```javascript
async function detectCaptcha(page)
```
- –î–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç reCAPTCHA iframe
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—Å—Ç "captcha" –∏ "unusual traffic"
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true` –µ—Å–ª–∏ –∫–∞–ø—á–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞

#### 2. –û–∂–∏–¥–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è –∫–∞–ø—á–∏
```javascript
async function waitForCaptchaSolution(page, maxWaitMinutes = 5)
```
- –ñ–¥–µ—Ç –¥–æ 5 –º–∏–Ω—É—Ç –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ—à–∏—Ç –∫–∞–ø—á—É
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É –ø–æ—Å–ª–µ —Ä–µ—à–µ–Ω–∏—è

#### 3. –°–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏
```javascript
const randomDelay = (min, max)
```
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É min –∏ max
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º –¥–µ–π—Å—Ç–≤–∏—è–º –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ —á–µ–ª–æ–≤–µ–∫–∞

### üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ searchProductImage()

#### –ë—ã–ª–æ:
```javascript
await delay(1500); // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏
await page.type(searchBoxSelector, productName, { delay: 100 });
await delay(2500);
```

#### –°—Ç–∞–ª–æ:
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–ø—á–∏ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
if (await detectCaptcha(page)) {
  await waitForCaptchaSolution(page);
}

await randomDelay(1500, 2500); // –°–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏

// –°–ª—É—á–∞–π–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—á–∞—Ç–∏
await page.type(searchBoxSelector, productName, {
  delay: Math.floor(Math.random() * 70) + 80  // 80-150ms
});

await randomDelay(2500, 3500);
```

### üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ü–∏–∫–ª–µ

#### –î–æ–±–∞–≤–ª–µ–Ω–æ: –£–º–Ω—ã–µ –ø–∞—É–∑—ã –º–µ–∂–¥—É —Ç–æ–≤–∞—Ä–∞–º–∏

```javascript
// –ö–∞–∂–¥—ã–µ 50 —Ç–æ–≤–∞—Ä–æ–≤ - –¥–ª–∏–Ω–Ω–∞—è –ø–∞—É–∑–∞
if (productNumber % 50 === 0) {
  const pauseSec = Math.floor(Math.random() * 15) + 45; // 45-60 —Å–µ–∫
  console.log(`‚è∏Ô∏è  –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ ${productNumber} —Ç–æ–≤–∞—Ä–æ–≤. –î–ª–∏–Ω–Ω–∞—è –ø–∞—É–∑–∞ ${pauseSec} —Å–µ–∫—É–Ω–¥...`);
  await delay(pauseSec * 1000);
}
// –ö–∞–∂–¥—ã–µ 30 —Ç–æ–≤–∞—Ä–æ–≤ - —Å—Ä–µ–¥–Ω—è—è –ø–∞—É–∑–∞
else if (productNumber % 30 === 0) {
  const pauseSec = Math.floor(Math.random() * 15) + 30; // 30-45 —Å–µ–∫
  console.log(`‚è∏Ô∏è  –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ ${productNumber} —Ç–æ–≤–∞—Ä–æ–≤. –°—Ä–µ–¥–Ω—è—è –ø–∞—É–∑–∞ ${pauseSec} —Å–µ–∫—É–Ω–¥...`);
  await delay(pauseSec * 1000);
}
// –ö–∞–∂–¥—ã–µ 10 —Ç–æ–≤–∞—Ä–æ–≤ - –∫–æ—Ä–æ—Ç–∫–∞—è –ø–∞—É–∑–∞
else if (productNumber % 10 === 0) {
  const pauseSec = Math.floor(Math.random() * 10) + 15; // 15-25 —Å–µ–∫
  console.log(`‚è∏Ô∏è  –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ ${productNumber} —Ç–æ–≤–∞—Ä–æ–≤. –ö–æ—Ä–æ—Ç–∫–∞—è –ø–∞—É–∑–∞ ${pauseSec} —Å–µ–∫—É–Ω–¥...`);
  await delay(pauseSec * 1000);
}
```

#### –î–æ–±–∞–≤–ª–µ–Ω–æ: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏

```javascript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ
if (!imageUrl || imageUrl.length < 10) {
  throw new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –≤–∞–ª–∏–¥–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ");
}
```

#### –î–æ–±–∞–≤–ª–µ–Ω–æ: –ü–∞—É–∑–∞ –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏ –∫–∞–ø—á–∏

```javascript
// –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–≤—è–∑–∞–Ω–∞ —Å –∫–∞–ø—á–µ–π, –¥–µ–ª–∞–µ–º –ø–∞—É–∑—É
if (error.message.includes('captcha') || error.message.includes('–ö–∞–ø—á–∞')) {
  console.log(`‚è∏Ô∏è  –î–µ–ª–∞—é –ø–∞—É–∑—É –ø–æ—Å–ª–µ –∫–∞–ø—á–∏ (10 —Å–µ–∫—É–Ω–¥)...\n`);
  await delay(10000);
}
```

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `scripts/CAPTCHA_PREVENTION.md` - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–∞–ø—á–µ–π
- `scripts/CHANGELOG_CAPTCHA.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª (—Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `scripts/README_IMAGES.md` - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è –æ –∑–∞—â–∏—Ç–µ –æ—Ç –∫–∞–ø—á–∏
- `scripts/add_product_images.js` - –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Å –Ω–æ–≤—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|---------|------|-------|
| –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–∞–ø—á–∏ (0-50 —Ç–æ–≤–∞—Ä–æ–≤) | ~10% | ~0% |
| –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–∞–ø—á–∏ (50-100 —Ç–æ–≤–∞—Ä–æ–≤) | ~30% | ~5% |
| –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–∞–ø—á–∏ (100-150 —Ç–æ–≤–∞—Ä–æ–≤) | ~50% | ~15% |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–ø—á–∏ | –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ |
| –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ 50 —Ç–æ–≤–∞—Ä–æ–≤ | ~7 –º–∏–Ω | ~12 –º–∏–Ω (—Å –ø–∞—É–∑–∞–º–∏) |
| –ß–µ–ª–æ–≤–µ–∫–æ–ø–æ–¥–æ–±–Ω–æ—Å—Ç—å | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è |

### üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### –î–æ —É–ª—É—á—à–µ–Ω–∏–π:
```bash
pnpm images:add  # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã, –∫–∞–ø—á–∞ –∫–∞–∂–¥—ã–µ 60-80 —Ç–æ–≤–∞—Ä–æ–≤
```

#### –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:
```bash
# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥ - –ø–∞—Ä—Ç–∏—è–º–∏
IMAGES_LIMIT=50 pnpm images:add
# –ü–æ–¥–æ–∂–¥–∞—Ç—å 10-15 –º–∏–Ω—É—Ç
IMAGES_LIMIT=50 pnpm images:add
# –ò —Ç–∞–∫ –¥–∞–ª–µ–µ
```

### üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. ‚ùå **–ë—ã–ª–æ:** –°–∫—Ä–∏–ø—Ç –ø–∞–¥–∞–ª –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∫–∞–ø—á–∏
   ‚úÖ **–°—Ç–∞–ª–æ:** –°–∫—Ä–∏–ø—Ç –∂–¥–µ—Ç —Ä–µ—à–µ–Ω–∏—è –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É

2. ‚ùå **–ë—ã–ª–æ:** –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –≤—Å–µ–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏
   ‚úÖ **–°—Ç–∞–ª–æ:** –°–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–º–∏—Ç–∏—Ä—É—é—â–∏–µ —á–µ–ª–æ–≤–µ–∫–∞

3. ‚ùå **–ë—ã–ª–æ:** –ö–∞–ø—á–∞ –ø–æ—Å–ª–µ 100 —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞
   ‚úÖ **–°—Ç–∞–ª–æ:** –° —É–º–Ω—ã–º–∏ –ø–∞—É–∑–∞–º–∏ –∫–∞–ø—á–∞ —Ä–µ–¥–∫–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥–æ 150 —Ç–æ–≤–∞—Ä–æ–≤

4. ‚ùå **–ë—ã–ª–æ:** –ù–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –ø—Ä–∏ –∫–∞–ø—á–µ
   ‚úÖ **–°—Ç–∞–ª–æ:** –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–∂–∏–¥–∞–Ω–∏—è

### üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (–≤–æ–∑–º–æ–∂–Ω–æ)

- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—É–∑—ã (–∞–Ω–∞–ª–∏–∑ —á–∞—Å—Ç–æ—Ç—ã –∫–∞–ø—á–∏ –∏ –∞–≤—Ç–æ–ø–æ–¥—Å—Ç—Ä–æ–π–∫–∞)
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Å—Å–∏–∏ (—Å–∫–æ–ª—å–∫–æ –∫–∞–ø—á, –ø–æ—Å–ª–µ –∫–∞–∫–æ–≥–æ —Ç–æ–≤–∞—Ä–∞)
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∑–≤—É–∫/–æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –ø—Ä–∏ –∫–∞–ø—á–µ)
- [ ] –†–µ–∂–∏–º "stealth" (–µ—â–µ –±–æ–ª–µ–µ –º–µ–¥–ª–µ–Ω–Ω—ã–π, –Ω–æ 0% –∫–∞–ø—á–∏)

### üìù Breaking Changes

–ù–µ—Ç breaking changes. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã.

### üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–¥–µ–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ!

---

**–í–µ—Ä—Å–∏—è:** 2.0.0
**–î–∞—Ç–∞:** 2024-11-12
**–ê–≤—Ç–æ—Ä:** Claude Code + Morfi
